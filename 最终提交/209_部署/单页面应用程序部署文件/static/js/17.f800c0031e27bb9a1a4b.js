webpackJsonp([17],{QUQq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),r=a.n(o),s={data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入密码")):(/^(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^[^\s\u4e00-\u9fa5]{6,16}$/.exec(t)||a(new Error("6-16位，由数字、英文、符号三种类型构成，至少包含两种类型字符")),a())};return{loginForm:{username:"",message:"",pass:"",checkPass:""},loginForm1:{username:"",message:"",pass:"",checkPass:""},loginRules:{username:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱",trigger:["blur","change"]}],message:[{required:!0,trigger:"blur",message:"请输入验证码"}],pass:[{required:!0,validator:t,trigger:"blur"}],checkPass:[{required:!0,validator:function(t,a,o){""===a?o(new Error("请再次输入密码")):a!==e.loginForm.pass?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]},loginRules1:{username:[{required:!0,message:"请输入手机号",trigger:"blur"},{message:"请输入正确的手机号",trigger:["blur","change"]}],message:[{required:!0,trigger:"blur",message:"请输入验证码"}],pass:[{required:!0,validator:t,trigger:"blur"}],checkPass:[{required:!0,validator:function(t,a,o){""===a?o(new Error("请再次输入密码")):a!==e.loginForm1.pass?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]},loading:!1,activeName:"1",butName:"获取验证码",isDisabled:!1,validateCode:"",isdisplay:!1,yzmnum:1234}},methods:{handleClick:function(e,t){},getMessage:function(){var e=this,t=60;this.$refs.loginForm.validateField("username",function(a){if(a);else{var o={email:e.loginForm.username};e.$http.post("/api/sendCode",null,{params:o}).then(function(t){"请输入真实邮箱"==t.data.respCode?e.$alert("请输入真实邮箱!","失败",{confirmButtonText:"确定"}):localStorage.setItem("validateCode",t.data.respCode)},function(t){e.$router.push({path:"/"+t})});var r=setInterval(function(){0==t?(clearInterval(r),e.isDisabled=!1,e.butName="获取验证码"):(e.butName=t+"秒后重试",e.isDisabled=!0,t--)},1e3)}})},getPhoneMessage:function(){var e=this,t=60;this.$refs.loginForm1.validateField("username",function(a){if(a);else{var o={telephone:e.loginForm1.username};e.$http.post("/api/sendMessage",null,{params:o}).then(function(t){console.log("短信验证码为 ： "+t.data.respCode),"请输入真实手机号"==t.data.respCode?e.$alert("请输入真实手机号!","失败",{confirmButtonText:"确定"}):localStorage.setItem("validateCode",t.data.respCode)},function(t){e.$router.push({path:"/"+t})});var r=setInterval(function(){0==t?(clearInterval(r),e.isDisabled=!1,e.butName="获取验证码"):(e.butName=t+"秒后重试",e.isDisabled=!0,t--)},1e3)}})},signup:function(){var e=this;"1"==this.activeName?this.$refs.loginForm.validate(function(t){if(!t)return!1;if(localStorage.getItem("validateCode")!=e.loginForm.message)e.$alert("验证码错误，请重新输入","注册失败",{confirmButtonText:"确定"});else{e.loading=!0;var a={email:e.loginForm.username,password:e.loginForm.pass};e.$http.post("/api/registerByEmail",null,{params:a}).then(function(t){if(e.loading=!1,"1"==t.data.respCode){localStorage.setItem("roleId","0"),localStorage.setItem("roles","teacher");var a=new Date;localStorage.setItem("loginTime",a.getTime()),localStorage.setItem("isLogin",!0),localStorage.setItem("Authorization",t.data.token),localStorage.setItem("account",e.loginForm.username),e.$router.push("/home")}else e.loading=!1,e.$alert(t.data.respCode,"注册失败",{confirmButtonText:"确定"})},function(t){e.$router.push({path:"/"+t})})}}):this.$refs.loginForm1.validate(function(t){if(!t)return!1;if(localStorage.getItem("validateCode")!=e.loginForm1.message)e.$alert("验证码错误，请重新输入","注册失败",{confirmButtonText:"确定"});else{e.loading=!0;var a={telephone:e.loginForm1.username};e.$http.post("/api/registerByMessage",null,{params:a}).then(function(t){if(e.loading=!1,console.log("res.data (shouji) ="+r()(t.data)),"1"==t.data.respCode){localStorage.setItem("roleId","0"),localStorage.setItem("roles","teacher");var a=new Date;localStorage.setItem("loginTime",a.getTime()),localStorage.setItem("isLogin",!0),localStorage.setItem("Authorization",t.data.token),localStorage.setItem("account",e.loginForm1.username),e.$router.push("/home")}else e.loading=!1,e.$alert(t.data.respCode,"注册失败",{confirmButtonText:"确定"})},function(t){e.$router.push({path:"/"+t})})}})},login:function(){this.$router.push("/login")}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container"},[o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{autocomplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left"}},[o("div",{staticClass:"title-container"},[o("img",{staticStyle:{width:"250px"},attrs:{src:a("5Ax4")}})]),e._v(" "),o("div",[o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"邮箱注册",name:"1"}}),e._v(" "),o("el-tab-pane",{attrs:{label:"手机号注册",name:"2"}})],1)],1),e._v(" "),o("el-form",{directives:[{name:"show",rawName:"v-show",value:"1"==e.activeName,expression:"activeName == '1'"}],ref:"loginForm",attrs:{autocomplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left"}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",name:"username",type:"text",autocomplete:"on",placeholder:"请输入邮箱"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"message"}},[o("el-row",[o("el-col",{attrs:{span:15}},[o("el-input",{attrs:{"prefix-icon":"el-icon-message",name:"password",autocomplete:"on",placeholder:"请输入验证码"},model:{value:e.loginForm.message,callback:function(t){e.$set(e.loginForm,"message",t)},expression:"loginForm.message"}})],1),e._v(" "),o("el-col",{attrs:{span:8,offset:1}},[o("el-button",{attrs:{type:"primary",plain:"",disabled:e.isDisabled,id:"dyMobileButton"},on:{click:function(t){e.getMessage()}}},[e._v(e._s(e.butName))])],1)],1),e._v(" "),o("el-row",{attrs:{id:"yzm"}},[o("el-col",[o("label",{directives:[{name:"show",rawName:"v-show",value:1==e.isdisplay,expression:"isdisplay==true"}]},[e._v(e._s(e.yzmnum))])])],1)],1),e._v(" "),o("el-form-item",{attrs:{prop:"pass"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.loginForm.pass,callback:function(t){e.$set(e.loginForm,"pass",t)},expression:"loginForm.pass"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"checkPass"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-finished",type:"password",autocomplete:"off",placeholder:"请确认密码"},model:{value:e.loginForm.checkPass,callback:function(t){e.$set(e.loginForm,"checkPass",t)},expression:"loginForm.checkPass"}})],1),e._v(" "),o("el-button",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{type:"primary",loading:e.loading},on:{click:e.signup}},[e._v("注册")]),e._v(" "),o("el-link",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.login}},[e._v("已有账号，去登录")])],1),e._v(" "),o("el-form",{directives:[{name:"show",rawName:"v-show",value:"2"==e.activeName,expression:"activeName == '2'"}],ref:"loginForm1",attrs:{autocomplete:"on",model:e.loginForm1,rules:e.loginRules1,"label-position":"left"}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",name:"username",type:"text",autocomplete:"on",placeholder:"请输入手机号"},model:{value:e.loginForm1.username,callback:function(t){e.$set(e.loginForm1,"username",t)},expression:"loginForm1.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"message"}},[o("el-row",[o("el-col",{attrs:{span:15}},[o("el-input",{attrs:{"prefix-icon":"el-icon-message",name:"password",autocomplete:"on",placeholder:"请输入验证码"},model:{value:e.loginForm1.message,callback:function(t){e.$set(e.loginForm1,"message",t)},expression:"loginForm1.message"}})],1),e._v(" "),o("el-col",{attrs:{span:8,offset:1}},[o("el-button",{attrs:{type:"primary",plain:"",disabled:e.isDisabled,id:"dyMobileButton"},on:{click:function(t){e.getPhoneMessage()}}},[e._v(e._s(e.butName))])],1)],1),e._v(" "),o("el-row",{attrs:{id:"yzm"}},[o("el-col",[o("label",{directives:[{name:"show",rawName:"v-show",value:1==e.isdisplay,expression:"isdisplay==true"}]},[e._v(e._s(e.yzmnum))])])],1)],1),e._v(" "),o("el-button",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{type:"primary",loading:e.loading},on:{click:e.signup}},[e._v("注册")]),e._v(" "),o("el-link",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.login}},[e._v("已有账号，去登录")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("b6C9")},"data-v-134f2541",null);t.default=i.exports},b6C9:function(e,t,a){var o=a("e90H");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("7d94c856",o,!0)},e90H:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,'\n.login-form[data-v-134f2541] {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    width: 400px;\r\n    padding: 35px 35px 15px 35px;\r\n    margin: 120px auto;\r\n    /* background-color: #f8f8f9; */\r\n     background: rgba(255, 255, 255, 0.3);\r\n    overflow: hidden;\n}\n.login-container[data-v-134f2541] {\r\n  position: fixed;\r\n  height: 100%;\r\n  width: 100%;\r\n  /* background-image: url("../../assets/bg.jpg"); */\r\n  /* background-size: cover; */\r\n  background-repeat: no-repeat;\r\n  background-image: url('+a("WKKh")+");\r\n    background-size: 100%;\n}\r\n",""])}});