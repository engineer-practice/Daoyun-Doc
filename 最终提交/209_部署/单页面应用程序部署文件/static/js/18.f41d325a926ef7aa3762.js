webpackJsonp([18],{Hl0F:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("pFYg"),l=e.n(o),s=e("mvHQ"),n=e.n(s),r={data:function(){return{dictionaryForm:{code:"",name:"",description:""},dictionaryRules:{code:[{required:!0,message:"名称为必填项",trigger:"blur"}],name:[{required:!0,message:"关键字为必填项",trigger:"blur"}]},list:[],listLoading:!1,dialogFormVisible:!1,itemForm:{value:"",name:"",isDefault:"0"},value:"",title:"新增数据项",itemFormRules:{value:[{required:!0,message:"请输入值",trigger:"blur"},{type:"number",message:"值必须为数字值"}],name:[{required:!0,message:"请输入文本",trigger:"blur"}]},isEdit:!1,dic:[],index:0,row:[]}},created:function(){console.log("this.$route.query.code??????????????? = "+this.$route.query.code),void 0!=this.$route.query.code&&(this.isEdit=!0,this.getDetails(this.$route.query.code))},methods:{getDetails:function(t){var i=this;this.listLoading=!0,console.log("code???????????????? = "+t),this.$http.get("/api/dictionaries?code="+t).then(function(t){i.listLoading=!1,i.dictionaryForm=t.data.dict[0],i.dic=t.data.dict[0],i.list=t.data.detail},function(t){i.$router.push({path:"/"+t})})},filterState:function(t){return"1"==t},deleteItem:function(t){var i=this;for(var e in this.row=t,this.list)if(this.list[e].index==this.row.index&&null!=this.list[e].index&&void 0!=this.list[e].index&&null!=this.row.index&&void 0!=this.row.index||this.list[e].id==this.row.id&&null!=this.list[e].id&&void 0!=this.list[e].id&&null!=this.row.id&&void 0!=this.row.id){this.list.splice(e,1);break}if(null!=t.id&&void 0!=t.id){var o=[];console.log(t),o.push(t.id),this.$http.delete("/api/dictionaries?del_list="+o).then(function(t){"1"==t.data.respCode?i.$alert("数据项删除成功","成功",{confirmButtonText:"确定"}):i.$alert(t.data.respCode,"失败",{confirmButtonText:"确定"})},function(t){i.$router.push({path:"/"+t})})}},editItem:function(t){this.row=t,this.itemForm.value=parseInt(t.value),this.itemForm.name=t.name,this.itemForm.isDefault=t.isDefault.toString(),this.dialogFormVisible=!0,this.index=t.index,this.title="修改数据项"},addItem:function(){this.itemForm.value="",this.itemForm.name="",this.itemForm.isDefault="0",this.dialogFormVisible=!0,this.title="新增数据项"},onDataDictItemUp:function(t){console.log("this.list = "+n()(this.list)),console.log("this.row = "+n()(t));var i=parseInt(t.code),e=this.list[(i+this.list.length)%this.list.length];this.list[(i+this.list.length)%this.list.length]=this.list[(i-1+this.list.length)%this.list.length],this.list[(i-1+this.list.length)%this.list.length]=e;var o=this.list[(i+this.list.length)%this.list.length].code;this.list[(i+this.list.length)%this.list.length].code=this.list[(i-1+this.list.length)%this.list.length].code,this.list[(i-1+this.list.length)%this.list.length].code=o,console.log("typeof = = "+(void 0===i?"undefined":l()(i))),console.log("index = "+i),console.log("this.list = //////////////"+n()(this.list)),console.log("this.row = ///////////////////"+n()(t))},onDataDictItemDown:function(t){console.log("this.list = "+n()(this.list)),console.log("this.row = "+n()(t));var i=parseInt(t.code),e=this.list[(i+this.list.length)%this.list.length];this.list[(i+this.list.length)%this.list.length]=this.list[(i+1+this.list.length)%this.list.length],this.list[(i+1+this.list.length)%this.list.length]=e;var o=this.list[(i+this.list.length)%this.list.length].code;this.list[(i+this.list.length)%this.list.length].code=this.list[(i+1+this.list.length)%this.list.length].code,this.list[(i+1+this.list.length)%this.list.length].code=o,console.log("typeof = = "+(void 0===i?"undefined":l()(i))),console.log("index = "+i),console.log("this.list = //////////////"+n()(this.list)),console.log("this.row = ///////////////////"+n()(t))},submitForm:function(t){var i=this;this.$refs[t].validate(function(t){if(t){if("新增数据项"==i.title)i.list.push({value:i.itemForm.value,name:i.itemForm.name,isDefault:i.itemForm.isDefault,index:i.list.length}),console.log(i.list);else{if(console.log("this.list = "+n()(i.list)),console.log("this.row = "+n()(i.row)),console.log("this.itemForm.isDefault"+i.itemForm.isDefault),i.itemForm.isDefault)for(var e in i.list)i.list[e].isDefault=0;for(var e in i.list)if(i.list[e].index==i.row.index&&null!=i.list[e].index&&void 0!=i.list[e].index&&null!=i.row.index&&void 0!=i.row.index||i.list[e].id==i.row.id&&null!=i.list[e].id&&void 0!=i.list[e].id&&null!=i.row.id&&void 0!=i.row.id){i.list[e].name=i.itemForm.name,i.list[e].isDefault=i.itemForm.isDefault;break}}i.dialogFormVisible=!1}})},resetForm:function(t){this.dialogFormVisible=!1,this.$refs[t].resetFields()},submit:function(t){var i=this;this.$refs[t].validate(function(t){if(t)if(0==i.isEdit){var e=[];for(var o in i.list)e.push({value:i.list[o].value,name:i.list[o].name,is_default:i.list[o].isDefault,dict_order:"0",code:i.list[o].value});var l={code:i.dictionaryForm.code,name:i.dictionaryForm.name,description:i.dictionaryForm.description,detail:e};console.log("data ===== "+n()(l)),i.$http.post("/api/dictionaries",l).then(function(t){console.log("res.data.respCode = "+t.data.respCode),"1"==t.data.respCode?i.$alert("数据字典添加成功","成功",{confirmButtonText:"确定"}):i.$alert(t.data.respCode,"失败",{confirmButtonText:"确定"}),i.$router.push({path:"/dataDictionary"})})}else{e=[];for(var o in i.list)console.log("this.list[i].id = "+i.list[o].id+"      this.list[i].code = "+i.list[o].code),e.push({id:i.list[o].id,value:i.list[o].value,name:i.list[o].name,is_default:i.list[o].isDefault,dict_order:"0",code:i.list[o].value});l={id:i.dictionaryForm.id,old_code:i.dic.code,new_code:i.dictionaryForm.code,old_name:i.dic.name,new_name:i.dictionaryForm.name,description:i.dictionaryForm.description,detail:e};console.log("data = "+n()(l)),i.$http.patch("/api/dictionaries",l).then(function(t){console.log("res.data = "+n()(t.data)),"1"==t.data.respCode?i.$alert("数据字典修改成功","成功",{confirmButtonText:"确定"}):i.$alert(t.data.respCode,"失败",{confirmButtonText:"确定"}),i.$router.push({path:"/dataDictionary"})},function(t){i.$router.push({path:"/"+t})})}})}}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"app-container"},[e("div",{staticClass:"form-style1"},[e("span",[t._v("数据字典")]),t._v(" "),e("el-divider"),t._v(" "),e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.dictionaryForm,rules:t.dictionaryRules,"label-width":"100px","label-position":"top"}},[e("el-row",{attrs:{gutter:40}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{model:{value:t.dictionaryForm.name,callback:function(i){t.$set(t.dictionaryForm,"name",i)},expression:"dictionaryForm.name"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"关键字",prop:"code"}},[e("el-input",{attrs:{disabled:t.isEdit},model:{value:t.dictionaryForm.code,callback:function(i){t.$set(t.dictionaryForm,"code",i)},expression:"dictionaryForm.code"}})],1)],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"说明"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.dictionaryForm.description,callback:function(i){t.$set(t.dictionaryForm,"description",i)},expression:"dictionaryForm.description"}})],1)],1)],1),t._v(" "),e("div",{staticClass:"form-style1",staticStyle:{"margin-top":"20px"}},[e("span",[t._v("数据项")]),t._v(" "),e("el-divider"),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"Loading",fit:"","highlight-current-row":"","tooltip-effect":"dark","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[e("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.$index))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"值","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.value))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"文本","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.name))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"默认值","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t.filterState(i.row.isDefault)?e("i",{staticClass:"el-icon-check"}):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[e("i",{staticClass:"el-icon-edit",on:{click:function(e){t.editItem(i.row)}}}),t._v(" "),e("i",{staticClass:"el-icon-delete",staticStyle:{color:"red","margin-left":"20px"},on:{click:function(e){t.deleteItem(i.row)}}}),t._v(" "),e("button",{staticClass:"change-order-button",on:{click:function(e){t.onDataDictItemUp(i.row)}}},[t._v("\n                ↑\n              ")]),t._v(" "),e("button",{staticClass:"change-order-button",on:{click:function(e){t.onDataDictItemDown(i.row)}}},[t._v("\n                ↓\n              ")])])]}}])})],1),t._v(" "),e("el-button",{staticClass:"add_btn",attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(i){t.addItem()}}},[t._v("新增")])],1),t._v(" "),e("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(i){t.dialogFormVisible=i}}},[e("el-form",{ref:"itemForm",staticClass:"demo-ruleForm",attrs:{model:t.itemForm,rules:t.itemFormRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"值",prop:"value"}},[e("el-input",{attrs:{placeholder:"请输入值",disabled:"修改数据项"==t.title&&1==t.isEdit},model:{value:t.itemForm.value,callback:function(i){t.$set(t.itemForm,"value",t._n(i))},expression:"itemForm.value"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"文本",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入文本"},model:{value:t.itemForm.name,callback:function(i){t.$set(t.itemForm,"name",i)},expression:"itemForm.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"默认值"}},[e("el-radio",{attrs:{label:"1"},model:{value:t.itemForm.isDefault,callback:function(i){t.$set(t.itemForm,"isDefault",i)},expression:"itemForm.isDefault"}},[t._v("是")]),t._v(" "),e("el-radio",{attrs:{label:"0"},model:{value:t.itemForm.isDefault,callback:function(i){t.$set(t.itemForm,"isDefault",i)},expression:"itemForm.isDefault"}},[t._v("否")])],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","margin-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{width:"180px"},attrs:{type:"primary"},on:{click:function(i){t.submitForm("itemForm")}}},[t._v("保存")]),t._v(" "),e("el-button",{staticStyle:{width:"180px"},on:{click:function(i){t.resetForm("itemForm")}}},[t._v("取消")])],1)],1)],1),t._v(" "),e("div",{staticStyle:{"text-align":"right",color:"#5d5b5b","font-size":"14px",margin:"10px",background:"#fff"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"submit",staticStyle:{width:"180px"},attrs:{type:"primary",size:"small"},on:{click:function(i){t.submit("ruleForm")}}},[t._v("提交")])],1)])},staticRenderFns:[]};var d=e("VU/8")(r,a,!1,function(t){e("ac7o"),e("SocH")},"data-v-36141086",null);i.default=d.exports},NdoG:function(t,i,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.form-style1[data-v-36141086] {\r\n  background: #fff;\r\n  padding: 20px;\r\n  /* min-height: 85vh; */\n}\r\n",""])},SocH:function(t,i,e){var o=e("mZHg");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("b19a99f8",o,!0)},ac7o:function(t,i,e){var o=e("NdoG");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("2326ec80",o,!0)},mZHg:function(t,i,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.el-table__header {\r\n  width: auto !important;\n}\n.el-table__body {\r\n  width: auto !important;\n}\n.app-container {\r\n  background-color: #f0f2f5;\r\n  min-height: 100vh;\r\n  height: 100%;\n}\n.form-style {\r\n  background: #fff;\r\n  padding: 20px;\r\n  min-height: 85vh;\n}\n.add_btn {\r\n  width: 100%;\r\n  margin-top: 20px;\n}\n.submit {\r\n position: absolute;\r\n  left: 85%;\r\n  top: 87%;\r\n  width: 400px;\r\n  margin: 0px 0px 0px 0px;\r\n  border-radius: 5px;\n}\n.change-order-button {\r\n  background-color: #319795;\r\n  color: white;\r\n  font-weight: 900;\r\n  border: 0;\r\n  margin: 1px;\r\n  cursor: pointer;\r\n  border-radius: 3px;\n}\n.change-order-button:disabled {\r\n  opacity: 0.4;\r\n  cursor: not-allowed;\n}\r\n",""])}});