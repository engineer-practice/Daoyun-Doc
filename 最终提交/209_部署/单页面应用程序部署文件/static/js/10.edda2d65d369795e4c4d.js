webpackJsonp([10],{"6IZF":function(e,t,a){var n=a("CWKF");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("461a6c18",n,!0)},"904e":function(e,t,a){var n=a("BnMK");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("35dedafa",n,!0)},BnMK:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-table__header {\n  width: auto !important;\n}\n.el-table__body {\n  width: auto !important;\n}\n",""])},CWKF:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-pagination[data-v-2a4b90ff] {\n  text-align: center !important;\n  margin: 20px 0 !important;\n}\n.app-container[data-v-2a4b90ff] {\n  background-color: #f0f2f5;\n  min-height: 100vh;\n  height: 100%;\n}\n.form-style[data-v-2a4b90ff] {\n  background: #fff;\n  padding: 20px;\n}\n",""])},SfOp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),o={data:function(){return{list:[],tableList:[{label:"参数名称",prop:"paraName"},{label:"关键字",prop:"keyName"},{label:"值",prop:"keyValue"}],AllData:[],listLoading:!1,multipleSelection:[],dialogFormVisible:!1,parentList:[],menuForm:{parentId:"",paraName:"",keyValue:"",keyName:""},menus:{parentId:[{required:!0,message:"请选择上级菜单",trigger:"change"}],paraName:[{required:!0,message:"参数名称必填",trigger:"blur"}],keyName:[{required:!0,message:"关键字必填",trigger:"blur"}],keyValue:[{required:!0,message:"值必填",trigger:"blur"}]},totalNum:0,title:"新增用户",pageSize:10,page:1,formInline:{menus:"",state:""}}},filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},created:function(){this.showMenuData(this.page)},methods:{reset:function(){this.menuForm.parentId="",this.menuForm.paraName="",this.menuForm.keyValue="",this.menuForm.keyName=""},handleSelectionChange:function(e){this.multipleSelection=e},addData:function(){for(var e=0,t=JSON.parse(localStorage.getItem("authority")),a=0;a<t.length;a++)"9"==t[a]&&(e=1);e?this.$alert("你没有新增菜单权限",{confirmButtonText:"确定"}):(this.reset(),this.dialogFormVisible=!0,this.title="新增系统参数")},deleteUser:function(e){var t=this,a=0,n=JSON.parse(localStorage.getItem("authority"));if(n)for(var o=0;o<n.length;o++)"11"==n[o]&&(a=1);a?this.$alert("你没有删除菜单权限",{confirmButtonText:"确定"}):(console.log("this.del_list = "+i()(e)),this.$confirm("确定要删除该菜单？","删除菜单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){t.$http.delete("/api/systems?key_name="+e.keyName).then(function(e){console.log("res.data.respCode  = "+e.data.respCode),"1"==e.data.respCode&&t.$alert("删除成功","成功",{confirmButtonText:"确定"}).then(function(){t.listLoading=!0,t.$http.get("/api/menus").then(function(e){localStorage.setItem("menuList",i()(e.data))}),location.reload(),t.showMenuData(t.page)})})}).catch(function(){}))},deleteData:function(){var e=this,t=0,a=JSON.parse(localStorage.getItem("authority"));if(a)for(var n=0;n<a.length;n++)"11"==a[n]&&(t=1);if(t)this.$alert("你没有删除菜单权限",{confirmButtonText:"确定"});else if(0==this.multipleSelection.length)this.$alert("请至少选中一条数据","批量删除",{confirmButtonText:"确定"});else{var o=[];for(var n in this.multipleSelection)o.push(this.multipleSelection[n].id);this.$confirm("确定要删除所选择的菜单？","删除菜单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.$http.delete("/api/menus?ids="+o).then(function(t){"1"==t.data.respCode&&e.$alert("删除成功","成功",{confirmButtonText:"确定"}).then(function(){e.listLoading=!0,e.$http.get("/api/menus").then(function(e){localStorage.setItem("menuList",i()(e.data))}),location.reload(),e.showMenuData(e.page)})})}).catch(function(){})}},editData:function(e){var t=0,a=JSON.parse(localStorage.getItem("authority"));if(a)for(var n=0;n<a.length;n++)"10"==a[n]&&(t=1);t?this.$alert("你没有编辑系统参数权限",{confirmButtonText:"确定"}):(this.menuForm=e,this.title="编辑系统参数",this.dialogFormVisible=!0)},showMenuData:function(e){var t=this;this.list=[],this.listLoading=!0,this.page=e,this.$http.get("/api/systems?page="+this.page).then(function(e){console.log(e),t.listLoading=!1,t.totalNum=e.data.total,0!=t.totalNum&&(t.list=e.data.records)},function(e){t.listLoading=!1,t.$router.push({path:"/"+e})})},getParentList:function(){var e=this;this.$http.get("/api/menus?parent=1").then(function(t){e.listLoading=!1,e.parentList=t.data,e.parentList.push("无")})},addUser:function(){this.reset(),this.dialogFormVisible=!0,this.title="新增系统参数"},submitForm:function(e){var t=this,a={key_name:this.menuForm.keyName,key_value:this.menuForm.keyValue,para_name:this.menuForm.paraName},n={key_name:this.menuForm.keyName,key_value:this.menuForm.keyValue,para_name:this.menuForm.paraName};this.$refs[e].validate(function(e){e&&(t.dialogFormVisible=!1,"新增系统参数"==t.title?(console.log("this.title is right//////////////////////ok"),t.showMenuData(a),t.$http.post("/api/systems",null,{params:n}).then(function(e){console.log("res.data == "+i()(e.data)),"1"==e.data.respCode?t.$alert("系统参数新增成功","成功",{confirmButtonText:"确定"}).then(function(){t.listLoading=!0,t.$http.get("/api/menus").then(function(e){localStorage.setItem("menuList",i()(e.data))}),location.reload(),t.showMenuData(t.page)}):(t.$alert(e.data.respCode,"失败",{confirmButtonText:"确定"}),t.showMenuData(t.page))})):(console.log("修改系统的data = "+i()(n)),t.$http.patch("/api/systems",null,{params:n}).then(function(e){"1"==e.data.respCode?(console.log("修改系统参数返回data = "+i()(e.data)),t.$http.get("/api/menus").then(function(e){localStorage.setItem("menuList",i()(e.data))}),t.$alert("系统参数修改成功","成功",{confirmButtonText:"确定"}).then(function(){t.listLoading=!0,location.reload(),t.showMenuData(t.page)})):(t.$alert("系统参数修改失败","失败",{confirmButtonText:"确定"}),t.showMenuData(t.page))})))})},resetForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields(),this.reset(),this.showMenuData(this.page)},handleCurrentChange:function(e){this.page=e,this.showMenuData(this.page)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"form-style"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.addData()}}},[e._v("新增")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){e.deleteData()}}},[e._v("删除")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数名称","min-width":"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.paraName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关键字","min-width":"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.keyName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"值","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.keyValue))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(a){e.editData(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("el-link",{attrs:{type:"danger"},on:{click:function(a){e.deleteUser(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),0!=e.totalNum?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.totalNum,"page-size":e.pageSize},on:{"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"menuForm",staticClass:"demo-menuForm",attrs:{model:e.menuForm,rules:e.menus,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"参数名称",prop:"paraName"}},[a("el-input",{model:{value:e.menuForm.paraName,callback:function(t){e.$set(e.menuForm,"paraName",t)},expression:"menuForm.paraName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键字",prop:"keyName"}},[a("el-input",{model:{value:e.menuForm.keyName,callback:function(t){e.$set(e.menuForm,"keyName",t)},expression:"menuForm.keyName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"值",prop:"keyValue"}},[a("el-input",{model:{value:e.menuForm.keyValue,callback:function(t){e.$set(e.menuForm,"keyValue",t)},expression:"menuForm.keyValue"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("menuForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("menuForm")}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(e){a("6IZF"),a("904e")},"data-v-2a4b90ff",null);t.default=r.exports}});