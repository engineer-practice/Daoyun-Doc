webpackJsonp([11],{"27ox":function(t,e,a){var i=a("nIpO");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("141498a5",i,!0)},"96r5":function(t,e,a){var i=a("wg6s");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3a123b2e",i,!0)},W3MV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),n={data:function(){return{list:[],listLoading:!1,multipleSelection:[],dialogFormVisible:!1,totalNum:0,pageSize:10,searchForm:{name:""},page:1,data:[],id:1,editForm:{id:"",name:"",type:"",description:""},editRules:{name:[{required:!0,message:"请输入课程名",trigger:"blur"}],type:[{required:!0,message:"请选择课程类别",trigger:"blur"}]},addForm:{name:"",type:"",description:""},addRules:{name:[{required:!0,message:"请输入课程名",trigger:"blur"}],type:[{required:!0,message:"请选择课程类别",trigger:"blur"}]},formLabelWidth:"100px",title:"新增",isAdd:!0,selectTree:"",selectTreeId:"0",isAddSchool:!1}},created:function(){this.getAllData(this.page)},methods:{moment:a("PJh5"),handleSelectionChange:function(t){this.multipleSelection=t},deleteData:function(t){var e=this,a=[];a.push(t.id),this.$confirm("确定要删除选择的课程？","删除课程",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){var t=a;e.$http.delete("/api/courseManage?ids="+t).then(function(t){"1"==t.data.respCode?(e.$alert("删除成功","成功",{confirmButtonText:"确定"}),e.page=1,e.getAllData(e.page)):(e.$alert(t.data.respCode,"失败",{confirmButtonText:"确定"}),e.getAllData(e.page)),e.listLoading=!1},function(t){e.$router.push({path:"/"+t})})}).catch(function(){})},deleteDataBatch:function(){var t=this;if(0==this.multipleSelection.length)this.$alert("请至少选中一条数据","批量删除",{confirmButtonText:"确定"});else{var e=[];for(var a in this.multipleSelection)e.push(this.multipleSelection[a].id);this.$confirm("确定要删除选择的课程？","删除课程",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){var a=e;t.$http.delete("/api/courseManage?ids="+a).then(function(e){"1"==e.data.respCode?(t.$alert("删除成功","成功",{confirmButtonText:"确定"}),t.page=1,t.getAllData(t.page)):(t.$alert(e.data.respCode,"失败",{confirmButtonText:"确定"}),t.getAllData(t.page)),t.listLoading=!1},function(e){t.$router.push({path:"/"+e})})}).catch(function(){})}},searchData:function(){var t=this;this.list=[],this.listLoading=!0,this.page=1,this.$http.get("/api/courseManage?name="+this.searchForm.name+"&page="+this.page).then(function(e){t.list=e.data.records,t.listLoading=!1,t.totalNum=e.data.total},function(e){t.$router.push({path:"/"+e})})},getAllData:function(t){var e=this;this.selectTree="",this.selectTreeId="0",this.list=[],this.listLoading=!0,this.page=t,this.$http.get("/api/courseManage?page="+t).then(function(t){console.log("res.data from get = "+o()(t.data)),e.list=t.data.records,e.listLoading=!1,e.totalNum=t.data.total},function(t){e.$router.push({path:"/"+t})}),this.$http.get("/api/schools").then(function(t){console.log("this.data = "+e.data),e.data=t.data,console.log("res.data = "+o()(t.data))},function(t){e.$router.push({path:"/"+t})})},reset:function(){this.addForm.name="",this.addForm.type="",this.addForm.description=""},addData:function(){this.reset(),this.title="新增",this.isAdd=!0,this.dialogFormVisible=!0},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(t)if(e.dialogFormVisible=!1,1==e.isAdd){var a={name:e.addForm.name,type:e.addForm.type,email:localStorage.getItem("roleEmail"),description:e.addForm.description};e.$http.post("/api/courseManage",a).then(function(t){"1"==t.data.respCode?(e.$alert("添加成功","成功",{confirmButtonText:"确定"}),e.getAllData(e.page)):(e.$alert(t.data.respCode,"失败",{confirmButtonText:"确定"}),e.getAllData(e.page)),e.listLoading=!1},function(t){e.$router.push({path:"/"+t})})}else{"必修"==e.editForm.type&&(e.editForm.type="1"),"选修"==e.editForm.type&&(e.editForm.type="2");a={id:e.editForm.id,name:e.editForm.name,type:e.editForm.type,email:localStorage.getItem("roleEmail"),description:e.editForm.description};e.$http.patch("/api/courseManage",a).then(function(t){"1"==t.data.respCode?(e.$alert("修改成功","成功",{confirmButtonText:"确定"}),e.getAllData(e.page)):(e.$alert(t.data.respCode,"失败",{confirmButtonText:"确定"}),e.getAllData(e.page)),e.listLoading=!1},function(t){e.$router.push({path:"/"+t})})}})},resetForm:function(t){this.dialogFormVisible=!1,this.$refs[t].resetFields(),this.getAllData(this.page)},handleCurrentChange:function(t){this.page=t,this.getAllData(this.page)},resetData:function(){this.searchForm.name="",this.page=1,this.getAllData(this.page)},editData:function(t){this.title="编辑",this.isAdd=!1,this.editForm.name=t.name,1==t.type?this.editForm.type="必修":this.editForm.type="选修",this.editForm.id=t.id,this.editForm.description=t.description,this.dialogFormVisible=!0}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"form-style"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchForm}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.addData()}}},[t._v("新增")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){t.deleteDataBatch()}}},[t._v("删除")])],1),t._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.resetData()}}},[t._v("重置")])],1),t._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.searchData()}}},[t._v("查询")])],1),t._v(" "),a("el-form-item",{staticStyle:{float:"right"},attrs:{label:"名称："}},[a("el-input",{attrs:{placeholder:"请输入名称",size:"small"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1)],1),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",fit:"","highlight-current-row":"","tooltip-effect":"dark","header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((t.page-1)*t.pageSize+e.$index+1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"课程名","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"课程号","min-width":"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"课程类别","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.type?a("span",[t._v("必修")]):t._e(),t._v(" "),"2"==e.row.type?a("span",[t._v("选修")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"课程介绍","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.description))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.moment(e.row.createdTime).format("YYYY-MM-DD")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建人员","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.createdName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-link",{attrs:{type:"primary"},on:{click:function(a){t.editData(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),a("el-link",{attrs:{type:"danger"},on:{click:function(a){t.deleteData(e.row)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),0!=t.totalNum?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.totalNum,"page-size":t.pageSize},on:{"current-change":t.handleCurrentChange}}):t._e()],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[t.isAdd?a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addRules}},[a("el-form-item",{attrs:{label:"课程名","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{placeholder:"输入课程名"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"课程类别","label-width":t.formLabelWidth,prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择课程类别"},model:{value:t.addForm.type,callback:function(e){t.$set(t.addForm,"type",e)},expression:"addForm.type"}},[a("el-option",{attrs:{label:"必修",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"选修",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"课程介绍","label-width":t.formLabelWidth,prop:"description"}},[a("el-input",{model:{value:t.addForm.description,callback:function(e){t.$set(t.addForm,"description",e)},expression:"addForm.description"}})],1)],1):a("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.editRules}},[a("el-form-item",{attrs:{label:"课程名","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{placeholder:"输入课程名"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"课程类别","label-width":t.formLabelWidth,prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择课程类别"},model:{value:t.editForm.type,callback:function(e){t.$set(t.editForm,"type",e)},expression:"editForm.type"}},[a("el-option",{attrs:{label:"必修",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"选修",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"课程介绍","label-width":t.formLabelWidth,prop:"description"}},[a("el-input",{model:{value:t.editForm.description,callback:function(e){t.$set(t.editForm,"description",e)},expression:"editForm.description"}})],1)],1),t._v(" "),t.isAdd?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.resetForm("addForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("addForm")}}},[t._v("确 定")])],1):a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.resetForm("editForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("editForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(n,l,!1,function(t){a("27ox"),a("96r5")},"data-v-1dacdbc3",null);e.default=r.exports},nIpO:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-pagination[data-v-1dacdbc3] {\r\n  text-align: center !important;\r\n  margin: 20px 0 !important;\n}\n.dashboard-editor-container[data-v-1dacdbc3] {\r\n  float: left;\r\n  width: 20%;\n}\r\n",""])},wg6s:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-table__header {\r\n  width: auto !important;\n}\n.el-table__body {\r\n  width: auto !important;\n}\n.app-container {\r\n  background-color: #f0f2f5;\r\n  min-height: 100vh;\r\n  height: 100%;\n}\n.form-style {\r\n  background: #fff;\r\n  padding: 20px;\r\n  min-height: 85vh;\n}\r\n",""])}});