webpackJsonp([5],{CwSZ:function(e,t,o){"use strict";var r=o("p8xL"),a=o("XgCd"),n={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return i.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,o,a,n,i,s,c,u,p,d,f,m){var g=t;if("function"==typeof c)g=c(o,g);else if(g instanceof Date)g=d(g);else if(null===g){if(n)return s&&!m?s(o,l.encoder):o;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||r.isBuffer(g))return s?[f(m?o:s(o,l.encoder))+"="+f(s(g,l.encoder))]:[f(o)+"="+f(String(g))];var y,h=[];if(void 0===g)return h;if(Array.isArray(c))y=c;else{var v=Object.keys(g);y=u?v.sort(u):v}for(var b=0;b<y.length;++b){var w=y[b];i&&null===g[w]||(h=Array.isArray(g)?h.concat(e(g[w],a(o,w),a,n,i,s,c,u,p,d,f,m)):h.concat(e(g[w],o+(p?"."+w:"["+w+"]"),a,n,i,s,c,u,p,d,f,m)))}return h};e.exports=function(e,t){var o=e,i=t?r.assign({},t):{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===i.delimiter?l.delimiter:i.delimiter,u="boolean"==typeof i.strictNullHandling?i.strictNullHandling:l.strictNullHandling,p="boolean"==typeof i.skipNulls?i.skipNulls:l.skipNulls,d="boolean"==typeof i.encode?i.encode:l.encode,f="function"==typeof i.encoder?i.encoder:l.encoder,m="function"==typeof i.sort?i.sort:null,g=void 0!==i.allowDots&&i.allowDots,y="function"==typeof i.serializeDate?i.serializeDate:l.serializeDate,h="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:l.encodeValuesOnly;if(void 0===i.format)i.format=a.default;else if(!Object.prototype.hasOwnProperty.call(a.formatters,i.format))throw new TypeError("Unknown format option provided.");var v,b,w=a.formatters[i.format];"function"==typeof i.filter?o=(b=i.filter)("",o):Array.isArray(i.filter)&&(v=b=i.filter);var x,j=[];if("object"!=typeof o||null===o)return"";x=i.arrayFormat in n?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var O=n[x];v||(v=Object.keys(o)),m&&v.sort(m);for(var S=0;S<v.length;++S){var k=v[S];p&&null===o[k]||(j=j.concat(s(o[k],k,O,u,p,d?f:null,b,m,g,y,w,h)))}var F=j.join(c),A=!0===i.addQueryPrefix?"?":"";return F.length>0?A+F:""}},DDCP:function(e,t,o){"use strict";var r=o("p8xL"),a=Object.prototype.hasOwnProperty,n={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(e,t,o){if(e){var r=o.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,n=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),l=i?r.slice(0,i.index):r,s=[];if(l){if(!o.plainObjects&&a.call(Object.prototype,l)&&!o.allowPrototypes)return;s.push(l)}for(var c=0;null!==(i=n.exec(r))&&c<o.depth;){if(c+=1,!o.plainObjects&&a.call(Object.prototype,i[1].slice(1,-1))&&!o.allowPrototypes)return;s.push(i[1])}return i&&s.push("["+r.slice(i.index)+"]"),function(e,t,o){for(var r=t,a=e.length-1;a>=0;--a){var n,i=e[a];if("[]"===i)n=(n=[]).concat(r);else{n=o.plainObjects?Object.create(null):{};var l="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,s=parseInt(l,10);!isNaN(s)&&i!==l&&String(s)===l&&s>=0&&o.parseArrays&&s<=o.arrayLimit?(n=[])[s]=r:n[l]=r}r=n}return r}(s,t,o)}};e.exports=function(e,t){var o=t?r.assign({},t):{};if(null!==o.decoder&&void 0!==o.decoder&&"function"!=typeof o.decoder)throw new TypeError("Decoder has to be a function.");if(o.ignoreQueryPrefix=!0===o.ignoreQueryPrefix,o.delimiter="string"==typeof o.delimiter||r.isRegExp(o.delimiter)?o.delimiter:n.delimiter,o.depth="number"==typeof o.depth?o.depth:n.depth,o.arrayLimit="number"==typeof o.arrayLimit?o.arrayLimit:n.arrayLimit,o.parseArrays=!1!==o.parseArrays,o.decoder="function"==typeof o.decoder?o.decoder:n.decoder,o.allowDots="boolean"==typeof o.allowDots?o.allowDots:n.allowDots,o.plainObjects="boolean"==typeof o.plainObjects?o.plainObjects:n.plainObjects,o.allowPrototypes="boolean"==typeof o.allowPrototypes?o.allowPrototypes:n.allowPrototypes,o.parameterLimit="number"==typeof o.parameterLimit?o.parameterLimit:n.parameterLimit,o.strictNullHandling="boolean"==typeof o.strictNullHandling?o.strictNullHandling:n.strictNullHandling,""===e||null===e||void 0===e)return o.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){for(var o={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,l=r.split(t.delimiter,i),s=0;s<l.length;++s){var c,u,p=l[s],d=p.indexOf("]="),f=-1===d?p.indexOf("="):d+1;-1===f?(c=t.decoder(p,n.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(p.slice(0,f),n.decoder),u=t.decoder(p.slice(f+1),n.decoder)),a.call(o,c)?o[c]=[].concat(o[c]).concat(u):o[c]=u}return o}(e,o):e,s=o.plainObjects?Object.create(null):{},c=Object.keys(l),u=0;u<c.length;++u){var p=c[u],d=i(p,l[p],o);s=r.merge(s,d,o)}return r.compact(s)}},XgCd:function(e,t,o){"use strict";var r=String.prototype.replace,a=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,a,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},mw3O:function(e,t,o){"use strict";var r=o("CwSZ"),a=o("DDCP"),n=o("XgCd");e.exports={formats:n,parse:a,stringify:r}},p8xL:function(e,t,o){"use strict";var r=Object.prototype.hasOwnProperty,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),n=function(e,t){for(var o=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(o[r]=e[r]);return o};e.exports={arrayToObject:n,assign:function(e,t){return Object.keys(t).reduce(function(e,o){return e[o]=t[o],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],o=[],r=0;r<t.length;++r)for(var a=t[r],n=a.obj[a.prop],i=Object.keys(n),l=0;l<i.length;++l){var s=i[l],c=n[s];"object"==typeof c&&null!==c&&-1===o.indexOf(c)&&(t.push({obj:n,prop:s}),o.push(c))}return function(e){for(var t;e.length;){var o=e.pop();if(t=o.obj[o.prop],Array.isArray(t)){for(var r=[],a=0;a<t.length;++a)void 0!==t[a]&&r.push(t[a]);o.obj[o.prop]=r}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),o="",r=0;r<t.length;++r){var n=t.charCodeAt(r);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?o+=t.charAt(r):n<128?o+=a[n]:n<2048?o+=a[192|n>>6]+a[128|63&n]:n<55296||n>=57344?o+=a[224|n>>12]+a[128|n>>6&63]+a[128|63&n]:(r+=1,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),o+=a[240|n>>18]+a[128|n>>12&63]+a[128|n>>6&63]+a[128|63&n])}return o},isBuffer:function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,o,a){if(!o)return t;if("object"!=typeof o){if(Array.isArray(t))t.push(o);else{if("object"!=typeof t)return[t,o];(a.plainObjects||a.allowPrototypes||!r.call(Object.prototype,o))&&(t[o]=!0)}return t}if("object"!=typeof t)return[t].concat(o);var i=t;return Array.isArray(t)&&!Array.isArray(o)&&(i=n(t,a)),Array.isArray(t)&&Array.isArray(o)?(o.forEach(function(o,n){r.call(t,n)?t[n]&&"object"==typeof t[n]?t[n]=e(t[n],o,a):t.push(o):t[n]=o}),t):Object.keys(o).reduce(function(t,n){var i=o[n];return r.call(t,n)?t[n]=e(t[n],i,a):t[n]=i,t},i)}}},sNmA:function(e,t,o){var r=o("x6jo");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o("rjj0")("3df7f6f3",r,!0)},tf2v:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("mvHQ"),a=o.n(r),n=(o("mw3O"),{inject:["reload"],data:function(){return{loginForm:{username:"",password:""},loginForm1:{username:"",message:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入邮箱"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]},loginRules1:{username:[{required:!0,trigger:"blur",message:"请输入邮箱"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],message:[{required:!0,trigger:"blur",message:"请输入验证码"}]},passwordType:"password",loading:!1,activeName:"1",butName:"获取验证码",isDisabled:!1}},created:function(){this.confirmAutoLogin()},methods:{handleClick:function(e,t){},loginByThird:function(){var e=this;this.$http.get("/api/getQQCode").then(function(e){window.open(e.data.url)},function(t){e.$router.push({path:"/"+t})})},confirmAutoLogin:function(){var e=JSON.parse(localStorage.getItem("isLogin")),t=localStorage.getItem("loginTime"),o=(new Date).getTime(),r=localStorage.getItem("Authorization");!0===e&&o<=t+2592e6&&null!=r&&""!=r&&this.$router.push("/home")},getMessage:function(){var e=this,t=60;this.$refs.loginForm1.validateField("username",function(o){if(o);else{var r={email:e.loginForm1.username};e.$http.post("/api/sendCode",r).then(function(t){"请输入真实邮箱"==t.data.respCode?e.$alert("请输入真实邮箱!","失败",{confirmButtonText:"确定"}):localStorage.setItem("validateCode",t.data.respCode)},function(t){e.$router.push({path:"/"+t})});var a=setInterval(function(){0==t?(clearInterval(a),e.isDisabled=!1,e.butName="获取验证码"):(e.butName=t+"秒后重试",e.isDisabled=!0,t--)},1e3)}})},showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},handleLogin:function(){var e=this;console.log(this.config),"1"==this.activeName?this.$refs.loginForm.validate(function(t){if(t){e.loading=!0;var o={email:e.loginForm.username,password:e.loginForm.password};localStorage.setItem("roleEmail",o.email),e.$http.post("/api/loginByPassword",o).then(function(t){if("1"==t.data.respCode)if(e.loading=!1,"3"!=t.data.role){localStorage.setItem("roleId",t.data.role),"0"==t.data.role?localStorage.setItem("roles","teacher"):"1"==t.data.role?localStorage.setItem("roles","admin"):"2"==t.data.role&&localStorage.setItem("roles","superAdmin");var o=new Date;localStorage.setItem("loginTime",o.getTime()),localStorage.setItem("Authorization",t.data.token),localStorage.setItem("account",t.data.email),localStorage.setItem("isLogin",!0),e.$http.get("/api/menus").then(function(e){localStorage.setItem("menuList",a()(e.data))}),e.$router.push("/home")}else e.$alert("该账号为学生账号，没有权限登录后台管理系统，如有疑问请联系管理员！","提示",{confirmButtonText:"确定"});else e.loading=!1,e.$alert(t.data.respCode,"登录失败",{confirmButtonText:"确定"})},function(t){e.$router.push({path:"/"+t})})}}):this.$refs.loginForm1.validate(function(t){if(t)if(localStorage.getItem("validateCode")!=e.loginForm1.message)e.$alert("验证码错误，请重新输入","注册失败",{confirmButtonText:"确定"});else{e.loading=!0;var o={email:e.loginForm1.username};e.$http.post("/api/loginByCode",o).then(function(t){if(e.loading=!1,"1"==t.data.respCode)if("3"!=t.data.role){localStorage.setItem("roleId",t.data.role),"0"==t.data.role?localStorage.setItem("roles","teacher"):"1"==t.data.role?localStorage.setItem("roles","admin"):"2"==t.data.role&&localStorage.setItem("roles","superAdmin");var o=new Date;localStorage.setItem("loginTime",o.getTime()),e.loading=!1,localStorage.setItem("Authorization",t.data.token),localStorage.setItem("account",t.data.email),localStorage.setItem("isLogin",!0),e.$http.get("/api/menus").then(function(t){localStorage.setItem("menuList",a()(t.data)),e.$router.push("/home")})}else e.$alert("该账号为学生账号，没有权限登录后台管理系统，如有疑问请联系管理员！","提示",{confirmButtonText:"确定"});else e.loading=!1,e.$alert(t.data.respCode,"登录失败",{confirmButtonText:"确定"})},function(t){e.$router.push({path:"/"+t})})}})},signup:function(){this.$router.push("/signup")},forgetPass:function(){this.$router.push("/forgetPassword")}}}),i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("div",{staticClass:"login-form"},[r("el-form",[r("div",{staticClass:"title-container"},[r("img",{staticStyle:{width:"250px"},attrs:{src:o("5Ax4")}})]),e._v(" "),r("div",[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"密码登录",name:"1"}}),e._v(" "),r("el-tab-pane",{attrs:{label:"验证码登录",name:"2"}})],1)],1)]),e._v(" "),r("el-form",{directives:[{name:"show",rawName:"v-show",value:"1"==e.activeName,expression:"activeName=='1'"}],ref:"loginForm",attrs:{autocomplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",name:"username",type:"text",autocomplete:"on",placeholder:"请输入邮箱/昵称/手机号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",name:"password",type:e.passwordType,autocomplete:"on",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[r("i",{attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"},[r("svg-icon",{attrs:{"icon-class":"eye"}})],1)])],1),e._v(" "),r("el-button",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleLogin}},[e._v("登录")]),e._v(" "),r("el-link",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(t){e.signup()}}},[e._v("注册")]),e._v(" "),r("el-link",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.forgetPass()}}},[e._v("忘记密码")])],1),e._v(" "),r("el-formPublicPath",{directives:[{name:"show",rawName:"v-show",value:"2"==e.activeName,expression:"activeName=='2'"}],ref:"loginForm1",attrs:{autocomplete:"on",model:e.loginForm1,rules:e.loginRules1,"label-position":"left"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",name:"username",type:"text",autocomplete:"on",placeholder:"请输入邮箱"},model:{value:e.loginForm1.username,callback:function(t){e.$set(e.loginForm1,"username",t)},expression:"loginForm1.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"message"}},[r("el-row",[r("el-col",{attrs:{span:15}},[r("el-input",{attrs:{"prefix-icon":"el-icon-message",name:"password",autocomplete:"on",placeholder:"请输入验证码"},model:{value:e.loginForm1.message,callback:function(t){e.$set(e.loginForm1,"message",t)},expression:"loginForm1.message"}})],1),e._v(" "),r("el-col",{attrs:{span:8,offset:1}},[r("el-button",{attrs:{type:"primary",plain:"",disabled:e.isDisabled,id:"dyMobileButton"},on:{click:function(t){e.getMessage()}}},[e._v(e._s(e.butName))])],1)],1)],1),e._v(" "),r("el-button",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleLogin}},[e._v("登录")]),e._v(" "),r("el-link",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.signup}},[e._v("注册")])],1)],1)])},staticRenderFns:[]};var l=o("VU/8")(n,i,!1,function(e){o("sNmA")},"data-v-4524903c",null);t.default=l.exports},x6jo:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"\n.login-container[data-v-4524903c] {\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  background-image: url("+o("dZ/S")+");\n  background-size: cover;\n  background-repeat: no-repeat;\n}\n.login-container .login-form[data-v-4524903c] {\n    position: absolute;\n    left: 0;\n    right: 0;\n    width: 400px;\n    padding: 35px 35px 15px 35px;\n    margin: 120px auto;\n    background-color: #f8f8f9;\n}\n.login-container .show-pwd[data-v-4524903c] {\n    position: absolute;\n    right: 10px;\n    top: 7px;\n    font-size: 16px;\n    color: #889aa4;\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n}\n",""])}});