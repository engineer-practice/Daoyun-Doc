webpackJsonp([21],{"0/NF":function(e,t,r){var a=r("uYnD");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("1982f6e2",a,!0)},jR5d:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){var e=this;return{ruleForm:{email:"",message:"",passChange:"",checkPassChange:"",age:""},loading:!1,butName:"获取验证码",isDisabled:!1,validateCode:"",resetRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱",trigger:["blur","change"]}],message:[{required:!0,trigger:"blur",message:"请输入验证码"}],passChange:[{required:!0,validator:function(e,t,r){""===t?r(new Error("请输入密码")):(/^(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^[^\s\u4e00-\u9fa5]{6,16}$/.exec(t)||r(new Error("6-16位，由数字、英文、符号三种类型构成，至少包含两种类型字符")),r())},trigger:"blur"}],checkPassChange:[{required:!0,validator:function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.ruleForm.passChange?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]}}},methods:{login:function(){this.$router.push({path:"/login"})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(localStorage.getItem("validateCode")!=t.ruleForm.message)t.$alert("验证码错误，请重新输入","注册失败",{confirmButtonText:"确定"});else{t.loading=!0;var r={telephone:t.ruleForm.email,newpassword:t.ruleForm.passChange};t.$http.post("/api/user/forgetPassword",r).then(function(e){"1"==e.data.respCode?(t.$alert("密码修改成功，跳转到登录页重新登录","成功",{confirmButtonText:"确定"}),t.loading=!1,t.$router.push("/login")):t.$alert(e.data.respCode,"失败",{confirmButtonText:"确定"})})}})},getMessage:function(){var e=this,t=60;this.$refs.ruleForm.validateField("email",function(r){if(r);else{var a={email:e.ruleForm.email};e.$http.post("/api/sendCode",a).then(function(t){"请输入真实邮箱"==t.data.respCode?e.$alert("请输入真实邮箱!","失败",{confirmButtonText:"确定"}):localStorage.setItem("validateCode",t.data.respCode)});var o=setInterval(function(){0==t?(clearInterval(o),e.isDisabled=!1,e.butName="获取验证码"):(e.butName=t+"秒后重试",e.isDisabled=!0,t--)},1e3)}})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"forget-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.resetRules,"label-position":"left"}},[a("div",{staticClass:"title-container"},[a("img",{staticStyle:{width:"250px"},attrs:{src:r("5Ax4")}})]),e._v(" "),a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",name:"email",type:"text",autocomplete:"on",placeholder:"请输入邮箱"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"message"}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{"prefix-icon":"el-icon-message",name:"password",placeholder:"请输入验证码"},model:{value:e.ruleForm.message,callback:function(t){e.$set(e.ruleForm,"message",t)},expression:"ruleForm.message"}})],1),e._v(" "),a("el-col",{attrs:{span:8,offset:1}},[a("el-button",{attrs:{type:"primary",plain:"",disabled:e.isDisabled,id:"dyMobileButton"},on:{click:function(t){e.getMessage()}}},[e._v(e._s(e.butName))])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"passChange"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.ruleForm.passChange,callback:function(t){e.$set(e.ruleForm,"passChange",t)},expression:"ruleForm.passChange"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkPassChange"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-finished",type:"password",autocomplete:"off",placeholder:"请确认密码"},model:{value:e.ruleForm.checkPassChange,callback:function(t){e.$set(e.ruleForm,"checkPassChange",t)},expression:"ruleForm.checkPassChange"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1),e._v(" "),a("el-link",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)},staticRenderFns:[]};var n=r("VU/8")(a,o,!1,function(e){r("0/NF")},"data-v-71125ae0",null);t.default=n.exports},uYnD:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.forget-container[data-v-71125ae0] {\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  background-image: url("+r("dZ/S")+");\n  background-size: cover;\n  background-repeat: no-repeat;\n}\n.forget-container .demo-ruleForm[data-v-71125ae0] {\n    position: absolute;\n    left: 0;\n    right: 0;\n    width: 400px;\n    padding: 35px 35px 15px 35px;\n    margin: 120px auto;\n    background-color: #f8f8f9;\n}\n.forget-container .title-container[data-v-71125ae0] {\n    position: relative;\n}\n.forget-container .title-container .title[data-v-71125ae0] {\n      font-size: 26px;\n      color: #4a4949;\n      margin: 0px auto 40px auto;\n      text-align: center;\n      font-weight: bold;\n}\n",""])}});